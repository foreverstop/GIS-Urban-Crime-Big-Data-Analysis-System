# 城市犯罪大数据时空分析与预测系统

## 🌟 项目简介

本项目是一款基于 GIS（地理信息系统）的 Web 应用，专注于对城市历史犯罪事件大数据进行**时空维度上的深度分析、可视化与探索**。系统整合了现代前端框架（Vue 3）、GIS 库（Leaflet & Turf.js）和数据可视化工具（ECharts），旨在将海量、复杂的犯罪数据转化为直观、可交互的地理信息视图和统计图表。

### 核心价值与目标

* **直观的可视化洞察：** 通过地图和图表，将抽象的犯罪数据映射到地理空间和时间维度，快速识别犯罪热点和模式。
* **灵活的交互式分析：** 支持多维度时间筛选和自定义地理区域分析，赋予用户强大的探索能力。
* **决策支持赋能：** 为城市安全管理、警务资源部署和学术研究提供强有力的数据支持和科学决策辅助。

---

## ✨ 核心功能详情

本项目以“犯罪地图模块”为核心枢纽，实现了以下关键功能点的深度集成与高效协同：

### 1. 地图显示与交互（GIS 可视化基础）

* **高性能地图渲染：** 采用 **Leaflet.js** 作为地图引擎，使用 **Stadia Maps 的'alidade\_smooth\_dark'瓦片服务**作为底图，提供现代感的深色主题。
* **多源数据加载：** 预加载了从 **2014 年至 2024 年**的 GeoJSON 格式历史犯罪事件数据。
* **点位可视化：** 筛选后的犯罪事件点位以**青色圆形标记（CircleMarker）**叠加在地图上，具有半透明填充效果，模拟光晕感。
* **信息查询：** 支持鼠标悬停显示**Tooltip（犯罪类型）**；点击点位弹出详细 **Popup 窗口**，展示报告日期、发生街区、地区、邻里等核心属性信息。

### 2. 多维度数据筛选（时空数据过滤）

* **时间筛选：** 使用 Element Plus 下拉选择器，支持用户按**年份、月份和日期**进行层级筛选。月份天数选项会根据所选的年份和月份**实时动态更新**。
* **类型筛选：** 犯罪类型选项在系统初始化时从所有数据中**动态提取、去重并排序**，确保选项的全面性，同时支持模糊搜索。
* **数据流控制：** 筛选条件变动会触发核心过滤函数，实时更新地图上的点位图层。在应用新的时间筛选时，会**自动清除任何已存在的地理分析结果**，确保数据视图的干净和统一。

### 3. 交互式数据可视化（ECharts 统计分析）

系统利用 **ECharts** 库生成高交互性的图表，帮助用户从统计角度理解犯罪趋势：

| 图表名称 | 触发条件 | 主要功能 | 交互特性 |
| :--- | :--- | :--- | :--- |
| **每月案件数量柱状图** | 仅选择年份 | 展示该年 12 个月的案件数量分布，识别犯罪季节性趋势。 | 点击月份柱子，可**自动将筛选条件锁定到该月份**（图表驱动筛选）。 |
| **每月类型占比饼图** | 选择年份和月份 | 深入分析特定月份内不同犯罪类型的比例构成。 | 点击饼图扇区，可**自动将筛选条件锁定到该犯罪类型**（图表驱动筛选）。 |
| **每日类型占比环状图** | 选择年份、月份和日期 | 细致展示特定日期内犯罪类型的分布情况。 | 点击环状区域，可**自动将筛选条件锁定到该犯罪类型**（图表驱动筛选）。 |

### 4. 区域地理分析（Turf.js 空间计算）

该模块集成了 **Leaflet.Draw** 和 **Turf.js**，支持用户进行自定义地理区域的空间分析，实现从“全局洞察”到“局部深挖”：

* **区域绘制：** 允许用户在地图上绘制**矩形或多边形**区域。
* **空间判断核心：** 利用 **Turf.js 的 `booleanPointInPolygon`** 函数，高效判断当前时间筛选下的所有犯罪点是否落在绘制区域内。
* **可视化反馈：** 分析完成后，**区域内点位渲染为蓝色，区域外点位渲染为红色**，实现视觉上的即时区分。
* **结果统计与展示：** 弹窗 (`ElDialog`) 展示详细分析结果，包括：
    * 区域内犯罪案件总数。
    * 利用 `turf.area()` 计算出的**区域地理面积（单位：平方公里）**。
    * **区域内犯罪类型数量排序柱状图**，快速识别区域内主要风险，并提供**数据视图、图表类型切换、重置和保存图片**等工具箱功能。

### 5. 数据导出与下载

该功能为用户提供了将分析成果导出至外部专业工具的能力：

* **范围选择：** 支持导出**当前时间筛选数据**、**地理区域筛选数据**和**所有原始数据**。
* **格式支持：** 提供常见的 **JSON、CSV** 格式下载（前端实现）。
* **专业 GIS 格式：** 通过与 **Python 后端服务**（需单独部署）集成，支持专业的 **SHP (Shapefile)** 格式下载，极大扩展了数据的应用价值。

---

## 🛠️ 技术栈与依赖

| 类型 | 技术栈名称 | 详细说明 |
| :--- | :--- | :--- |
| **前端核心** | **Vue.js 3 (Composition API)** | 响应式核心框架，实现组件化开发。 |
| **构建工具** | **Vite** | 极速的开发服务器和打包工具。 |
| **GIS 引擎** | **Leaflet.js** | 轻量级、高性能的 JavaScript 地图库。 |
| **空间分析** | **Turf.js** | 强大的地理空间算法库，用于前端几何计算。 |
| **地图绘制** | **Leaflet.Draw** | Leaflet 插件，用于在地图上绘制和编辑图形。 |
| **数据可视化** | **ECharts** | 用于生成所有统计图表，提供强大的交互能力。 |
| **UI 框架** | **Element Plus** | 基于 Vue 3 的桌面端组件库，提供统一、美观的界面样式。 |
| **数据源** | **GeoJSON (Local Assets)** | 项目数据源，以本地 JSON 文件形式存储 2014-2024 年份数据。 |
| **后端支持** | **Python (Flask/FastAPI) - *规划*** | 用于实现 SHP 文件转换和下载的 API 服务。 |

---

## 🚀 本地运行指南

### 前提条件

您需要安装以下软件：

* Node.js (推荐 v16 或更高版本)
* npm 或 yarn

### 1. 克隆项目仓库

```bash
git clone <您的项目仓库地址>
cd <项目文件夹名称>
```

### 2\. 安装项目依赖

使用 npm 或 yarn 安装所有前端依赖：

```bash
# 使用 npm 安装
npm install

# 或者使用 yarn 安装
yarn install
```

### 3\. 启动开发服务器

运行以下命令启动本地开发环境：

```bash
# 使用 npm 启动
npm run dev

# 或者使用 yarn 启动
yarn dev
```

项目将在您的浏览器中自动打开（通常地址为：`http://localhost:5173/`）。

-----

## 💡 规划与未来展望

本项目将持续优化和扩展，以实现更全面的功能：

1.  **数据分析模块完善：**
      * **犯罪热点分析：** 实现基于核密度估计（KDE）的犯罪热力图，直观识别犯罪高密度区域。
      * **时空聚类：** 引入 DBSCAN 或其它空间统计方法，自动检测犯罪活动的时空聚集模式。
      * **关联规则挖掘：** 探索犯罪类型与特定地理特征（如商业区、交通枢纽）之间的内在联系。
2.  **预测与预警功能：**
      * **时间序列预测：** 利用机器学习模型（如 ARIMA 或 Prophet），对未来短期内的犯罪趋势进行预测。
      * **空间预测模型：** 引入时空回归模型，提供特定区域的犯罪风险预测可视化。
3.  **系统架构与性能优化：**
      * **数据服务化：** 将当前本地 GeoJSON 数据迁移至 **PostgreSQL + PostGIS** 数据库，实现数据的动态管理和高效查询。
      * **性能优化：** 针对大规模数据，探索使用 Web Workers 或矢量瓦片（MVT）技术，提升渲染效率。

-----

## 👨‍💻 贡献与交流

欢迎对本项目提出任何宝贵的建议或贡献代码。如果您在使用过程中发现任何问题或有新的功能需求，请随时通过 Issue 区域提出。

-----




