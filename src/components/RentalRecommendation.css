/* 定义全局数字主题变量 */
:root {
  --digital-bg-color: #0A1838; /* 深蓝背景 */
  --digital-primary-color: #00FFFF; /* 亮青色 */
  --digital-secondary-color: #007BFF; /* 亮蓝色 */
  --digital-text-color: #A0B0D0; /* 浅灰色文字 */
  --digital-border-color: #00FFFF; /* 边框颜色 (亮青色) */
  --digital-glow-color: #00FFFF; /* 发光颜色 */
  --digital-panel-bg: rgba(10, 24, 56, 0.9); /* 面板背景 (半透明深蓝，更不透明些) */
  --digital-card-bg: rgba(10, 24, 56, 0.8); /* 卡片背景 (略深半透明深蓝) */
  --digital-hover-bg: rgba(0, 255, 255, 0.1); /* 悬停背景 (透明青色) */
  --digital-shadow-light: rgba(0, 255, 255, 0.3); /* 较淡的发光阴影 */
  --digital-shadow-medium: rgba(0, 255, 255, 0.6); /* 中等发光阴影 */
  --digital-shadow-strong: rgba(0, 255, 255, 0.9); /* 强烈发光阴影 */
}

/* 重置所有元素的边距和内边距 */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  color: var(--digital-text-color); /* 默认文字颜色 */
}

/* --- 弹窗动画 --- */
.popup-enter-active, .popup-leave-active {
  transition: transform 0.4s ease-out, opacity 0.4s ease-out; /* 稍慢的动画 */
}
.popup-enter-from {
  opacity: 0;
  transform: translateY(-50px) scale(0.95); /* 从上方略微缩小进入 */
}
.popup-enter-to {
  opacity: 1;
  transform: translateY(0) scale(1);
}
.popup-leave-from {
  opacity: 1;
  transform: translateY(0) scale(1);
}
.popup-leave-to {
  opacity: 0;
  transform: translateY(-50px) scale(0.95); /* 向上方略微缩小退出 */
}

/* 之前动画的别名，保持兼容 */
@keyframes slide-fade-in {
  0% {
    opacity: 0;
    transform: translateY(-50px) scale(0.95);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.modal-slide-enter-active {
  animation: slide-fade-in 400ms ease-out forwards;
}

.modal-slide-leave-active {
  animation: slide-fade-in 300ms ease-in reverse forwards;
}

/* --- 雷达图容器 --- */
.radar-container {
  width: 90%; /* 稍大一些 */
  max-width: 650px; /* 最大宽度 */
  margin: 0 auto 20px; /* 增加下边距 */
  background-color: var(--digital-card-bg); /* 雷达图背景 */
  border: 1px solid var(--digital-border-color); /* 青色边框 */
  border-radius: 12px;
  box-shadow: 0 0 20px var(--digital-shadow-medium); /* 强烈发光 */
  padding: 15px; /* 内部留白 */
}
.radar-container canvas {
  width: 100% !important;
  height: auto !important;
  display: block;
}

/* --- 弹窗关闭按钮 --- */
.popup-overlay .close-btn,
.popup-overlay .close-btn2 {
  position: absolute;
  top: 20px; /* 调整位置 */
  right: 20px; /* 调整位置 */
  width: 45px; /* 增大尺寸 */
  height: 45px;
  background: var(--digital-panel-bg); /* 半透明深蓝 */
  border: 1px solid var(--digital-border-color); /* 青色边框 */
  border-radius: 50%;
  color: var(--digital-primary-color); /* 青色文字 */
  font-size: 32px; /* 增大字体 */
  line-height: 42px; /* 居中对齐 */
  text-align: center;
  cursor: pointer;
  z-index: 10001;
  box-shadow: 0 0 10px var(--digital-shadow-medium); /* 发光 */
  transition: all 0.2s ease;
  transform: translate(0); /* 确保不会被 transformY(-50%) 影响 */
}

.popup-overlay .close-btn2 {
  top: 220px; /* 保持原有的相对位置 */
  right: 20px; /* 与第一个按钮对齐 */
}

.popup-overlay .close-btn:hover,
.popup-overlay .close-btn2:hover {
  background: rgba(0, 255, 255, 0.2); /* 悬停时背景更亮 */
  box-shadow: 0 0 15px var(--digital-shadow-strong); /* 悬停时更强发光 */
  transform: scale(1.05);
}

/* --- 弹窗遮罩 --- */
.popup-overlay {
  position: fixed;
  top: 0; left: 0;
  width: 100vw;
  height: 100vh;
  background-color: rgba(0, 0, 0, 0.7); /* 更深的半透明遮罩 */
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: auto;
  padding: 20px;
  box-sizing: border-box;
  z-index: 10000;
}

/* --- 弹窗内容区 --- */
.popup-content {
  background: var(--digital-panel-bg); /* 半透明深蓝背景 */
  border-radius: 12px; /* 更大圆角 */
  padding: 25px; /* 增加内边距 */
  box-sizing: border-box;
  max-width: 60vw; /* 调整最大宽度 */
  max-height: 90vh;
  overflow-y: auto;
  overflow-x: hidden;
  position: relative;
  border: 1px solid var(--digital-border-color); /* 青色边框 */
  box-shadow: 0 0 30px var(--digital-shadow-strong); /* 强烈发光 */
}

.popup-content img,
.popup-content canvas {
  display: block;
  margin: 0 auto;
  filter: brightness(0.8) contrast(1.1) drop-shadow(0 0 8px var(--digital-shadow-light)); /* 图片和画布添加发光 */
}

.popup-overlay .popup-content h2 {
  margin-top: 0;
  margin-bottom: 15px; /* 增加下边距 */
  text-align: center;
  color: var(--digital-primary-color); /* 青色标题 */
  text-shadow: 0 0 10px var(--digital-shadow-medium); /* 标题发光 */
  font-size: 1.8rem; /* 增大字号 */
}

.popup-overlay .popup-content ul {
  padding-left: 1.5em; /* 调整列表缩进 */
  margin: 1em 0; /* 增加上下间距 */
  color: var(--digital-text-color); /* 列表文字颜色 */
}

.popup-overlay .popup-content ul li {
  margin-bottom: 0.6em; /* 增加行间距 */
  line-height: 1.6;
  text-shadow: 0 0 2px rgba(0, 255, 255, 0.1); /* 轻微文字发光 */
}

/* --- 蒙版与卡片 --- */
.modal-mask {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, .7); /* 更深的半透明蒙版 */
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.modal {
  width: 380px; /* 略微增大宽度 */
  max-width: 94vw;
  background: var(--digital-panel-bg); /* 半透明深蓝背景 */
  border-radius: 12px;
  padding: 1.8rem 2rem 1.6rem; /* 调整内边距 */
  box-shadow: 0 0 30px var(--digital-shadow-strong); /* 强烈发光 */
  border: 1px solid var(--digital-border-color); /* 青色边框 */
}

.modal-title {
  font-size: 1.5rem; /* 增大标题字号 */
  font-weight: 600;
  margin-bottom: 1.5rem; /* 增加下边距 */
  text-align: center;
  color: var(--digital-primary-color); /* 青色标题 */
  text-shadow: 0 0 10px var(--digital-shadow-medium); /* 标题发光 */
}

/* --- 栅格排版 --- */
.form-grid {
  display: grid;
  grid-template-columns: 120px 1fr; /* 调整标签列宽 */
  row-gap: 1.2rem; /* 增加行间距 */
  column-gap: 1rem; /* 增加列间距 */
  margin-bottom: 1.8rem; /* 增加下边距 */
}

.form-grid label {
  align-self: center;
  font-size: 1rem; /* 调整字号 */
  color: var(--digital-text-color); /* 浅灰色文字 */
  text-shadow: 0 0 2px rgba(0, 255, 255, 0.1); /* 轻微文字发光 */
}

/* --- 输入框 --- */
.form-grid input {
  flex: 1 1 0;
  padding: .5rem .8rem; /* 增大内边距 */
  border: 1px solid var(--digital-border-color); /* 青色边框 */
  border-radius: 6px;
  font-size: 1rem; /* 调整字号 */
  outline: none;
  width: 100%;
  background-color: rgba(0, 255, 255, 0.05); /* 浅透明青色背景 */
  color: var(--digital-primary-color); /* 输入文字为青色 */
  transition: border-color .2s ease, box-shadow .2s ease, background-color .2s ease;
  box-shadow: 0 0 5px var(--digital-shadow-light); /* 默认发光 */
}

.form-grid input:focus {
  border-color: var(--digital-primary-color); /* 聚焦时青色边框 */
  box-shadow: 0 0 15px var(--digital-shadow-medium); /* 聚焦时强烈发光 */
  background-color: rgba(0, 255, 255, 0.1); /* 聚焦时背景更亮 */
}

/* --- 按钮 --- */
.btn-row {
  text-align: right;
  margin-top: 1.5rem;
}

.btn-primary,
.btn-secondary {
  padding: .6rem 1.2rem; /* 增大内边距 */
  font-size: 1rem; /* 调整字号 */
  border-radius: 8px; /* 更大圆角 */
  border: none;
  cursor: pointer;
  transition: background .2s ease, transform .1s ease, box-shadow .2s ease, color .2s ease;
}

.btn-primary {
  background: var(--digital-primary-color); /* 青色主按钮 */
  color: var(--digital-bg-color); /* 深蓝文字 */
  font-weight: bold;
  box-shadow: 0 0 10px var(--digital-shadow-medium); /* 默认发光 */
}

.btn-primary:hover {
  background: #00E5E5; /* 悬停时更亮的青色 */
  box-shadow: 0 0 20px var(--digital-shadow-strong); /* 悬停时强烈发光 */
}

.btn-secondary {
  background: var(--digital-panel-bg); /* 半透明深蓝背景 */
  color: var(--digital-primary-color); /* 青色文字 */
  border: 1px solid var(--digital-border-color); /* 青色边框 */
  margin-left: 1rem; /* 增加间距 */
  box-shadow: 0 0 5px var(--digital-shadow-light); /* 默认发光 */
}

.btn-secondary:hover {
  background: rgba(0, 255, 255, 0.15); /* 悬停时背景更亮 */
  box-shadow: 0 0 10px var(--digital-shadow-medium); /* 悬停时更强发光 */
}

.btn-primary:active,
.btn-secondary:active {
  transform: scale(.97);
}

.red-dot-icon {
  width: 10px; /* 增大尺寸 */
  height: 10px;
  background: #FF4500; /* 亮橙红色，作为危险或突出点 */
  border: 2px solid var(--digital-primary-color); /* 青色外圈 */
  border-radius: 50%;
  background-image: none !important;
  box-shadow: 0 0 8px #FF4500; /* 发光 */
}

/* --- 分析侧边栏 --- */
.analysis-sidebar {
  width: 250px; /* 略微增大宽度 */
  background-color: var(--digital-panel-bg); /* 半透明深蓝背景 */
  padding: 1.5rem; /* 调整内边距 */
  border-radius: 12px; /* 更大圆角 */
  box-shadow: 0 0 20px var(--digital-shadow-medium); /* 强烈发光 */
  border: 1px solid var(--digital-border-color); /* 青色边框 */
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  min-height: 700px; /* 调整最小高度 */
}

.analysis-sidebar h3 {
  font-size: 1.3rem; /* 增大标题字号 */
  margin-bottom: 1.2rem; /* 增加下边距 */
  color: var(--digital-primary-color); /* 青色标题 */
  font-weight: bold;
  padding-left: 0.3rem;
  text-shadow: 0 0 8px var(--digital-shadow-light); /* 文字发光 */
}

.menu-item {
  margin-bottom: 1.5rem; /* 增加下边距 */
}

.menu-header {
  display: flex;
  align-items: center;
  padding: 0.8rem 1rem; /* 调整内边距 */
  border-radius: 8px;
  background-color: rgba(0, 255, 255, 0.05); /* 浅透明青色背景 */
  color: var(--digital-text-color); /* 文字颜色 */
  font-size: 1rem; /* 调整字号 */
  cursor: pointer;
  transition: background-color 0.2s ease, box-shadow 0.2s ease, color 0.2s ease;
  border: 1px solid rgba(0, 255, 255, 0.3); /* 边框 */
  box-shadow: 0 0 5px var(--digital-shadow-light); /* 默认发光 */
}

.menu-header:hover {
  background-color: rgba(0, 255, 255, 0.15); /* 悬停时背景更亮 */
  box-shadow: 0 0 10px var(--digital-shadow-medium); /* 悬停时更强发光 */
  color: var(--digital-primary-color); /* 悬停时青色 */
}

.menu-header .arrow {
  width: 1rem; /* 增大箭头尺寸 */
  height: 1rem;
  margin-right: 0.8rem; /* 调整间距 */
  border-left: 0.25rem solid var(--digital-primary-color); /* 青色箭头 */
  border-bottom: 0.25rem solid var(--digital-primary-color);
  transform: rotate(-135deg);
  transition: transform 0.2s ease;
}

.menu-header .arrow.expanded {
  transform: rotate(-45deg);
}

.menu-header .icon {
  margin-right: 0.8rem; /* 调整图标间距 */
  color: var(--digital-primary-color); /* 青色图标 */
}

.menu-sub-items {
  padding-left: 2rem; /* 调整缩进 */
  margin-top: 0.5rem; /* 调整上边距 */
}

.sub-item {
  padding: 0.6rem 1rem; /* 调整内边距 */
  border-radius: 6px;
  color: var(--digital-text-color); /* 文字颜色 */
  font-size: 0.95rem; /* 调整字号 */
  cursor: pointer;
  transition: background-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
}

.sub-item:hover {
  background-color: rgba(0, 255, 255, 0.08); /* 悬停时背景更亮 */
  color: var(--digital-primary-color); /* 悬停时青色 */
  box-shadow: 0 0 5px var(--digital-shadow-light); /* 轻微发光 */
}

.sub-item .icon {
  margin-right: 0.8rem;
  color: var(--digital-secondary-color); /* 蓝色图标 */
}

/* --- 地图区域 --- */
.map-area {
  flex: 1;
  background: var(--digital-panel-bg); /* 半透明深蓝背景 */
  border-radius: 12px;
  box-shadow: 0 0 20px var(--digital-shadow-medium); /* 强烈发光 */
  border: 1px solid var(--digital-border-color); /* 青色边框 */
  padding: 1.8rem; /* 调整内边距 */
  display: flex;
  flex-direction: column;
  min-height: 700px; /* 调整最小高度 */
}

.map-area h3 {
  color: var(--digital-primary-color); /* 青色标题 */
  font-size: 1.5rem; /* 增大标题字号 */
  margin-bottom: 1.5rem; /* 增加下边距 */
  text-shadow: 0 0 10px var(--digital-shadow-medium); /* 标题发光 */
}

.map-container {
  flex: 1;
  min-height: 675px; /* 确保有足够高度 */
  border-radius: 4px;
  /* 确保这里的样式与 OSMMap.vue 的 map-container 保持一致或协调 */
}

/* --- 整体布局 --- */
.adaptive-container {
  width: 100vw;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  overflow-x: hidden;
  background: var(--digital-bg-color); /* 主背景色改为深蓝 */
  color: var(--digital-text-color); /* 默认文字颜色 */
  position: relative;
}

.adaptive-header {
  height: var(--header-height);
  /* 使用定义的头部高度 */
  background: linear-gradient(to right, rgba(0, 255, 255, 0.1), rgba(0, 255, 255, 0.05), rgba(0, 255, 255, 0.1));
  border-bottom: 1px solid rgba(0, 255, 255, 0.3);
  box-shadow: 0 0 15px rgba(0, 255, 255, 0.4);
  position: relative;
  z-index: 10;
  flex-shrink: 0;
  /* 防止头部被压缩 */

  /* 以下是适应现有 .nav-wrapper 结构的样式 */
  display: flex;
  /* 让 nav-wrapper 的子元素在头部内居中和分散 */
  align-items: center;
  justify-content: space-between;
  padding: 0 30px;
  /* 与 CrimeMapView.vue 的 padding 保持一致 */
}

.nav-wrapper {
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/* logo-area 对应 CrimeMapView.vue 的 .header-left */
.logo-area {
  display: flex;
  align-items: center;
  gap: 15px;
  /* 与 CrimeMapView.vue 的 gap 保持一致 */
  flex-shrink: 0;
  /* 防止被压缩 */
}

/* logo-img 对应 CrimeMapView.vue 的 .header-logo */
.logo-img {
  height: 50px;
  /* 与 CrimeMapView.vue 的 height 保持一致 */
  width: auto;
  filter: drop-shadow(0 0 5px var(--digital-primary-color));
}


/* logo-text 对应 CrimeMapView.vue 的 .header-title */
.logo-text {
  font-size: 24px;
  /* 与 CrimeMapView.vue 的 font-size 保持一致 */
  font-weight: bold;
  color: var(--digital-primary-color);
  text-shadow: 0 0 8px rgba(0, 255, 255, 0.8);
  letter-spacing: 2px;
  white-space: nowrap;
  /* 防止标题换行 */
}


.adaptive-nav {
  flex-grow: 1;
  /* 占据中间剩余空间 */
  display: flex;
  justify-content: center;
  /* 导航项居中 */
  align-items: center;
  gap: 20px;
  /* 导航项间距 */
  margin: 0;
  /* 移除之前可能有的 margin */
}


.nav-item {
  color: var(--digital-text-color);
  font-size: 1.1rem;
  padding: 8px 15px;
  border-radius: 5px;
  transition: all 0.3s ease;
  font-weight: bold;
  white-space: nowrap;
  /* 防止导航项换行 */
  text-align: center;
  /* 确保文本在其框内居中 */
  position: relative;
  /* 用于可能的底部边框 */
  background-color: rgba(0, 255, 255, 0.05);
  /* 非激活状态下的半透明背景 */
  border: 1px solid rgba(0, 255, 255, 0.2);
  /* 非激活状态下的边框 */
  box-shadow: 0 0 5px rgba(0, 255, 255, 0.1);
  /* 非激活状态下的轻微阴影 */
}

.nav-item:hover {
  background-color: rgba(0, 255, 255, 0.15);
  /* 鼠标悬停时的背景发光效果 */
  color: var(--digital-primary-color);
  box-shadow: 0 0 10px rgba(0, 255, 255, 0.6);
  transform: translateY(-2px);
  /* 轻微上浮效果 */
}

.nav-item.active {
  /* Vue Router 提供的激活类名 */
  background-color: var(--digital-primary-color);
  color: var(--digital-bg-color);
  /* 激活时文本颜色与背景对比 */
  box-shadow: 0 0 15px var(--digital-glow-color);
  box-shadow: 0 0 10px rgba(0, 255, 255, 0.8);
  /* 激活时保持发光效果 */
}

/* user-area 对应 CrimeMapView.vue 的 .header-right */
.user-area {
  display: flex;
  align-items: center;
  gap: 15px;
  /* 与 CrimeMapView.vue 的 gap 保持一致 */
  flex-shrink: 0;
}

/* welcome-message 对应 CrimeMapView.vue 的 .user-info-display */
.welcome-message {
  display: flex;
  align-items: center;
  gap: 10px;
  /* 与 CrimeMapView.vue 的 gap 保持一致 */
  color: var(--digital-text-color);
  font-size: 1rem;
  /* 与 CrimeMapView.vue 的 font-size 保持一致 */
  white-space: nowrap;
  /* 防止换行 */
  margin-right: 0;
  /* 移除原来的 margin-right */
}

/* welcome-icon 对应 CrimeMapView.vue 的 .digital-welcome-icon */
.welcome-icon {
  font-size: 1.1em;
  /* 移除动画 */
  color: var(--digital-primary-color);
}

/* 挥手动画 */
@keyframes wave {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(15deg); }
  75% { transform: rotate(-15deg); }
}

/* 登出按钮保持原有样式 */
/* logout-btn 对应 CrimeMapView.vue 的 .logout-btn-digital */
.logout-btn {
  padding: 8px 15px;
  /* 与 CrimeMapView.vue 的 padding 保持一致 */
  font-size: 0.9rem;
  /* 与 CrimeMapView.vue 的 font-size 保持一致 */
  border-radius: 5px;
  /* 与 CrimeMapView.vue 的 border-radius 保持一致 */
  cursor: pointer;
  background-color: rgba(0, 255, 255, 0.2);
  color: var(--digital-primary-color);
  border: 1px solid rgba(0, 255, 255, 0.4);
  box-shadow: 0 0 5px rgba(0, 255, 255, 0.2);
  transition: all 0.3s ease;
  font-weight: bold;
}

.logout-btn:hover {
  background-color: var(--digital-primary-color);
  color: var(--digital-bg-color);
  box-shadow: 0 0 15px var(--digital-primary-color);
  transform: translateY(-2px);
}

.adaptive-main {
  flex: 1;
  width: 100%;
  padding: 2.5rem; /* 增加整体内边距 */
  min-height: calc(100vh - 120px);
  display: flex;
  align-items: flex-start;
  background: var(--digital-bg-color); /* 主内容区背景色 */
  gap: 2.5rem; /* 增加间距 */
}

.content-section {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 2.5rem;
  background: rgba(10, 24, 56, 0.7);
  border-radius: 12px;
  border: 1px solid var(--digital-primary-color);
  box-shadow: 0 0 20px rgba(0, 255, 255, 0.6);
  backdrop-filter: blur(5px);
}


.system-title {
  font-size: 2.8rem; /* 增大标题字号 */
  color: var(--digital-primary-color); /* 青色标题 */
  margin-bottom: 1.8rem; /* 增加下边距 */
  line-height: 1.3;
  text-shadow: 0 0 15px var(--digital-shadow-strong); /* 强烈发光 */
}

.system-subtitle {
  color: var(--digital-text-color);
  line-height: 1.6;
  margin-bottom: 2.5rem;
  text-align: center;
  font-size: 1.1rem;
}


.feature-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 2.5rem; /* 增大间距 */
  margin: 3rem auto;
  max-width: 1200px;
  padding: 0 2rem;
  width: 100%;
}

.feature-box {
  flex: 1;
  min-width: 300px; /* 略微增大最小宽度 */
  max-width: 380px; /* 略微增大最大宽度 */
  background: var(--digital-card-bg); /* 卡片背景改为半透明深蓝 */
  border-radius: 12px; /* 更大圆角 */
  padding: 2.2rem; /* 增大内边距 */
  box-shadow: 0 0 20px var(--digital-shadow-medium); /* 强烈发光 */
  border: 1px solid var(--digital-border-color); /* 青色边框 */
  text-decoration: none;
  transition: all 0.3s ease;
  height: 200px; /* 略微增大高度 */
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.feature-box:hover {
  transform: translateY(-10px) scale(1.02); /* 悬停时上浮并略微放大 */
  box-shadow: 0 0 30px var(--digital-shadow-strong); /* 悬停时更强发光 */
  background-color: rgba(0, 255, 255, 0.1); /* 悬停时背景更亮 */
}

.feature-box h3 {
  color: var(--digital-primary-color); /* 青色标题 */
  font-size: 1.6rem; /* 增大字号 */
  margin-bottom: 1.2rem; /* 增加下边距 */
  text-shadow: 0 0 8px var(--digital-shadow-light); /* 文字发光 */
}

.feature-box p {
  color: var(--digital-text-color); /* 浅灰色文字 */
  line-height: 1.7; /* 调整行高 */
  font-size: 1.05rem; /* 略微增大字号 */
  text-shadow: 0 0 2px rgba(0, 255, 255, 0.1); /* 轻微文字发光 */
}

.adaptive-footer {
  width: 100%;
  background: rgba(10, 24, 56, 0.95); /* 底部改为半透明深蓝 */
  color: rgba(0, 255, 255, .7); /* 底部文字改为半透明青色 */
  text-align: center;
  padding: 1.8rem; /* 调整内边距 */
  font-size: 1rem; /* 调整字号 */
  flex-shrink: 0;
  border-top: 1px solid var(--digital-border-color); /* 顶部亮青色细线 */
  box-shadow: 0 -2px 15px var(--digital-shadow-medium); /* 底部阴影发光 */
}

/* --- 媒体查询 (响应式设计) --- */
@media (max-width: 1024px) {
  /* 调整桌面端到平板的过渡 */
  .adaptive-main {
    flex-direction: column; /* 侧边栏和地图堆叠 */
    align-items: center;
    padding: 2rem;
    gap: 2rem;
  }
  .analysis-sidebar {
    width: 90%; /* 侧边栏宽度变大 */
    max-width: 400px;
    min-height: auto; /* 移除最小高度限制 */
  }
  .map-area {
    width: 90%; /* 地图区域宽度变大 */
    min-height: 500px;
    padding: 1.5rem;
  }
  .popup-content {
    max-width: 80vw; /* 弹窗宽度调整 */
  }
  .modal {
    width: 90%;
  }
}

@media (max-width: 768px) {
  .nav-wrapper {
    flex-direction: column;
    gap: 1rem;
    padding: 0 1rem;
  }

  .adaptive-nav {
    margin: 0.5rem 0;
  }

  .adaptive-header {
    padding: 0.6rem 0;
  }

  .logo-img {
    height: 28px;
  }
  .logo-text {
    font-size: 1.2rem;
  }

  .system-title {
    font-size: 2.2rem;
    text-shadow: 0 0 10px var(--digital-shadow-strong);
  }

  .system-subtitle {
    font-size: 1.3rem;
    text-shadow: 0 0 6px var(--digital-shadow-light);
  }

  .feature-box {
    min-width: 100%;
    height: auto;
    padding: 1.5rem;
  }

  .content-section {
    padding: 2rem 1rem;
  }

  .feature-container {
    padding: 0 1rem;
    gap: 1.5rem;
  }

  /* 弹窗和模态框调整 */
  .popup-overlay .close-btn,
  .popup-overlay .close-btn2 {
    width: 35px;
    height: 35px;
    font-size: 24px;
    line-height: 32px;
    top: 15px;
    right: 15px;
  }
  .popup-overlay .close-btn2 {
    top: 180px; /* 保持相对位置 */
  }
  .popup-content {
    max-width: 95vw;
    padding: 15px;
  }
  .popup-overlay .popup-content h2 {
    font-size: 1.5rem;
  }
  .modal {
    padding: 1.5rem;
  }
  .modal-title {
    font-size: 1.3rem;
  }
  .form-grid {
    grid-template-columns: 1fr; /* 单列布局 */
    row-gap: 0.8rem;
  }
  .form-grid label {
    text-align: left; /* 标签左对齐 */
  }
  .btn-row {
    text-align: center; /* 按钮居中 */
  }
  .btn-primary, .btn-secondary {
    margin-left: 0;
    margin-top: 10px; /* 按钮上下间距 */
    width: 100%; /* 按钮宽度 */
  }
}

@media (max-width: 480px) {
  .system-title {
    font-size: 1.8rem;
  }

  .system-subtitle {
    font-size: 1.1rem;
  }

  .nav-item {
    padding: 0.5rem 0.8rem;
    font-size: 0.9rem;
  }

  .feature-container {
    gap: 1.2rem;
    margin: 2rem auto;
  }

  .nav-wrapper {
    padding: 0.5rem;
  }

  .logo-img {
    height: 24px;
  }

  .logo-text {
    font-size: 1rem;
  }
}

/* In RentalRecommendation.css or your main style file */

.popup-content canvas {
  display: block;
  margin: 0 auto;
  filter: brightness(0.8) contrast(1.1) drop-shadow(0 0 8px var(--digital-shadow-light));
  /* Add this to control max height */
  max-height: 400px; /* Adjust as needed, e.g., 400px or less */
  width: 100% !important; /* Ensure it takes full width of its container */
  height: auto !important; /* Allow height to adjust automatically */
}

/* charts图表转换*/

.chart-type-switcher {
  display: flex;
  justify-content: center;
  gap: 10px; /* Space between buttons */
  margin-bottom: 20px; /* Space below buttons before the chart */
  padding: 10px;
  background-color: var(--digital-background-dark); /* Dark background for the switcher */
  border-radius: 8px;
  border: 1px solid var(--digital-border-light);
  box-shadow: 0 0 10px var(--digital-shadow-light);
}

.chart-switcher-btn {
  background-color: var(--digital-background-medium); /* Medium background for buttons */
  color: var(--digital-text-color); /* Light text color */
  border: 1px solid var(--digital-border-light);
  padding: 8px 15px;
  border-radius: 5px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: bold;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.chart-switcher-btn:hover {
  background-color: var(--digital-primary-color-dark); /* Darker primary color on hover */
  color: var(--digital-text-bright);
  box-shadow: 0 0 12px var(--digital-primary-color);
}

.chart-switcher-btn.active {
  background-color: var(--digital-primary-color); /* Primary color for active button */
  color: var(--digital-background-dark); /* Dark text for active button */
  border-color: var(--digital-primary-color);
  box-shadow: 0 0 15px var(--digital-primary-color), 0 0 25px rgba(0, 255, 255, 0.4);
}

/* Also ensure your canvas styling for height is still appropriate */
.popup-content canvas {
  display: block;
  margin: 0 auto;
  filter: brightness(0.8) contrast(1.1) drop-shadow(0 0 8px var(--digital-shadow-light));
  max-height: 400px; /* Adjust as needed */
  width: 100% !important;
  height: auto !important;
}


